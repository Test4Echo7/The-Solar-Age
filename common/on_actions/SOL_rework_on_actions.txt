on_actions = {
    on_declare_war = { #For tracking how many simultaneous wars EQS has. ROOT is the country who declared war. FROM is the target of the war.
        effect = {
            if = {
                limit = {
                    OR = {
                        ROOT = {
                            tag = EQS
                        }
                        FROM = {
                            tag = EQS
                        }
                    }
                }
                EQS = {
                    add_to_variable = { num_simultaneous_wars = 1 }
                }
            }
            if = {
                limit = {
                    ROOT = {
                        NOT = { tag = EQS }
                    }
                    FROM = {
                        tag = EQS
                    }
                }
                ROOT = {
                    set_country_flag = SOL_new_attacker
                }
            }
            if = {
                limit = {
                    FROM = {
                        NOT = { tag = EQS }
                    }
                    ROOT = {
                        tag = EQS
                    }
                }
                FROM = {
                    set_country_flag = SOL_new_defender
                }
            }
            if = {
                limit = {
                    ROOT = {
                        tag = EQS
                        is_EQS_SOL = yes
                    }
                    FROM = {
                        tag = GRD
                        has_country_flag = SOL_GRI_accepted
                    }
                }
                ROOT = {
                    country_event = {
                        id = solarreworked.515
                        days = 3
                    }
                }
                FROM = {
                    country_event = {
                        id = solarreworked.515
                        days = 3
                    }
                }
            }
            if = {
                limit = {
                    ROOT = {
                        tag = EQS
                        is_EQS_SOL = yes
                        has_opinion_modifier = EQS_GRI_spurned
                    }
                    FROM = {
                        tag = GRD
                    }
                }
                remove_opinion_modifier = {
                    target = GRD
                    modifier = EQS_GRI_spurned
                }
            }
            if = {
                limit = {
                    ROOT = {
                        tag = EQS
                        has_country_flag = SOL_demoralizing_propaganda
                    }
                }
                FROM = {
                    add_ideas = SOL_offensive_propaganda
                }
            }
            if = {
                limit = {
                    ROOT = {
                        OR = {
                            tag = EQS
                            tag = CHN
                        }
                    }
                    FROM = {
                        OR = {
                            tag = EQS
                            tag = CHN
                        }
                    }
                    EQS = {
                        NOT = {
                            OR = {
                                has_country_flag = EQS_tummies_be_rumbly
                                has_country_flag = SOL_harmonic_commanders_leave
                                has_country_flag = SOL_purge_finished
                            }
                        }
                    }
                }
                EQS = {
                    country_event = {
                        id = solarreworked.133
                        days = 180
                        random_days = 90
                    }
                    set_country_flag = EQS_tummies_be_rumbly
                }
            }
        }
    }
    on_war_relation_added = { #ROOT is attacker. FROM is defender
        effect = {
            log = "[GetDateText]: [ROOT.GetName]: on_war_relation_added solar_age"
            if = {
                limit = {
                    NOT = { has_global_flag = celestia_and_luna_fused }
                    OR = {
                        AND = {
                            ROOT = {
                                tag = CHN
                            }
                            FROM = {
                                tag = EQS
                                NOT = { is_EQS_SOL = yes }
                                NOT = { has_power_balance = { id = EQS_vestments_of_power_bop } }
                                NOT = { has_power_balance = { id = EQS_sanity_bop } }
                            }
                        }
                        AND = {
                            ROOT = {
                                tag = EQS
                                NOT = { is_EQS_SOL = yes }
                                NOT = { has_power_balance = { id = EQS_vestments_of_power_bop } }
                                NOT = { has_power_balance = { id = EQS_sanity_bop } }
                            }
                            FROM = {
                                tag = CHN
                            }
                        }
                    }
                }
                EQS = {
                    if = {
                        limit = { has_country_flag = EQS_sanity_bop_initialized }
                        set_power_balance = {
                            id = EQS_sanity_bop
                            left_side = EQS_angy
                            right_side = EQS_kalm
                        }
                    }
                    else = {
                        set_country_flag = EQS_sanity_bop_initialized
                        set_country_flag = EQS_great_war_experience
                        set_power_balance = {
                            id = EQS_sanity_bop
                            set_default = yes
                        }
                    }
                }
            }
            if = {
                limit = {
                    NOT = { has_global_flag = celestia_and_luna_fused }
                    ROOT = {
                        tag = NLR
                    }
                    FROM = {
                        tag = EQS
                        NOT = { is_EQS_SOL = yes }
                        NOT = { has_power_balance = { id = EQS_vestments_of_power_bop } }
                        NOT = { has_power_balance = { id = EQS_sanity_bop } }
                    }
                }
                FROM = {
                    if = {
                        limit = { has_country_flag = EQS_sanity_bop_initialized }
                        set_power_balance = {
                            id = EQS_sanity_bop
                            left_side = EQS_angy
                            right_side = EQS_kalm
                        }
                    }
                    else = {
                        set_country_flag = EQS_sanity_bop_initialized
                        set_country_flag = EQS_nmm_experience
                        set_power_balance = {
                            id = EQS_sanity_bop
                            left_side = EQS_angy
                            right_side = EQS_kalm
                            set_value = 0.65
                        }
                    }
                }
            }
            if = {
                limit = {
                    NOT = { has_global_flag = celestia_and_luna_fused }
                    ROOT = {
                        tag = EQS
                        NOT = { is_EQS_SOL = yes }
                        NOT = { has_power_balance = { id = EQS_vestments_of_power_bop } }
                        NOT = { has_power_balance = { id = EQS_sanity_bop } }
                    }
                    FROM = {
                        tag = BUF
                    }
                }
                ROOT = {
                    add_ideas = EQS_mental_decline
                    if = {
                        limit = { has_country_flag = EQS_sanity_bop_initialized }
                        set_power_balance = {
                            id = EQS_sanity_bop
                            left_side = EQS_angy
                            right_side = EQS_kalm
                        }
                    }
                    else = {
                        set_country_flag = EQS_sanity_bop_initialized
                        set_country_flag = EQS_why_you_so_mean
                        set_power_balance = {
                            id = EQS_sanity_bop
                            left_side = EQS_angy
                            right_side = EQS_kalm
                            set_value = 0.25
                        }
                    }
                }
            }
            if = { #For if anything other than the three specified countries
                limit = {
                    NOT = { has_global_flag = celestia_and_luna_fused }
                    OR = {
                        AND = {
                            ROOT = {
                                NOT = {
                                    tag = CHN
                                    tag = NLR
                                    tag = BUF
                                }
                            }
                            FROM = {
                                tag = EQS
                                NOT = { is_EQS_SOL = yes }
                                NOT = { has_power_balance = { id = EQS_vestments_of_power_bop } }
                                NOT = { has_power_balance = { id = EQS_sanity_bop } }
                            }
                        }
                        AND = {
                            ROOT = {
                                tag = EQS
                                NOT = { is_EQS_SOL = yes }
                                NOT = { has_power_balance = { id = EQS_vestments_of_power_bop } }
                                NOT = { has_power_balance = { id = EQS_sanity_bop } }
                            }
                            FROM = {
                                NOT = {
                                    tag = CHN
                                    tag = NLR
                                    tag = BUF
                                }
                            }
                        }
                    }
                }
                EQS = {
                    if = {
                        limit = { has_country_flag = EQS_sanity_bop_initialized }
                        set_power_balance = {
                            id = EQS_sanity_bop
                            left_side = EQS_angy
                            right_side = EQS_kalm
                        }
                    }
                    else = {
                        set_country_flag = EQS_sanity_bop_initialized
                        set_country_flag = EQS_great_war_experience
                        set_power_balance = {
                            id = EQS_sanity_bop
                            left_side = EQS_angy
                            right_side = EQS_kalm
                            set_value = 0.75
                        }
                    }
                }
                if = {
                    limit = {
                        ROOT = {
                            OR = {
                                tag = CHN
                                tag = NLR
                            }
                        }
                        FROM = {
                            tag = EQS
                            has_power_balance = { id = EQS_sanity_bop }
                            NOT = { has_idea = EQS_mental_decline }
                        }
                    }
                    FROM = {
                        add_ideas = EQS_mental_decline
                    }
                }
                if = {
                    limit = {
                        OR = {
                            ROOT = {
                                tag = EQS
                                has_idea = SOL_harmonic_resistance_idea
                            }
                            FROM = {
                                tag = EQS
                                has_idea = SOL_harmonic_resistance_idea
                            }
                        }
                        NOT = { has_country_flag = SOL_harmonic_resistance_stymying }
                    }
                    country_event = {
                        id = solarreworked.537
                        days = 7
                        random_days = 14
                    }
                    set_country_flag = SOL_harmonic_resistance_stymying
                }
                if = {
                    limit = {
                        ROOT = {
                            tag = EQS
                            NOT = { has_country_flag = EQS_sanity_warning }
                        }
                        FROM = {
                            tag = EQS
                            NOT = { has_country_flag = EQS_sanity_warning }
                        }
                    }
                    EQS = {
                        set_country_flag = EQS_sanity_warning
                        country_event = {
                            id = solarreworked.531
                            days = 2
                        }
                    }
                }
            }
        }
    }
    on_peace = { #THIS is country no longer at war
        effect = {
            log = "[GetDateText]: [ROOT.GetName]: on_peace solar_age"
            if = {
                limit = {
                    tag = EQS
                    has_power_balance = { id = EQS_sanity_bop }
                }
                EQS = {
                    remove_ideas = EQS_mental_decline
                }
            }
            if = {
                limit = {
                    THIS = {
                        OR = {
                            has_country_flag = SOL_new_attacker
                            has_country_flag = SOL_new_defender
                        }
                    }
                }
                THIS = {
                    if = {
                        limit = { has_country_flag = SOL_new_attacker }
                        clr_country_flag = SOL_new_attacker
                    }
                    if = {
                        limit = { has_country_flag = SOL_new_defender }
                        clr_country_flag = SOL_new_defender
                    }
                }
                EQS = { #This should work how it's intended. Whenever a country that is in its own war with EQS, either because it declared on them or was declared on by them is peaced out, it reduces the number of simultaneous wars by 1. Should only fire in those scenarios
                    subtract_from_variable = { num_simultaneous_wars = 1 }
                }
            }
            if = {
                limit = {
                    EQS = { has_country_flag = SOL_demoralizing_propaganda }
                    THIS = { has_idea = SOL_offensive_propaganda }
                }
                THIS = {
                    remove_ideas = SOL_offensive_propaganda
                }
            }
        }
    }
    on_capitulation = {
        effect = {
            if = { #Check if RCT had River Swirl as leader
                limit = {
                    ROOT = {
                        OR = {
                            tag = RCT
                            tag = RIV
                        }
                        has_country_leader = { character = RCT_river_swirl ruling_only = yes }
                    }
                    FROM = {
                        tag = EQS
                        is_EQS_SOL = yes
                    }
                }
                log = "[GetDateText]: [ROOT.GetName]: on_capitulation solar_age"
                FROM = { set_country_flag = SOL_RCT_had_river_leader }
            }
            if = {
                limit = {
                    ROOT = {
                        tag = CES
                        has_country_leader = { character = CES_good_word ruling_only = yes }
                        NOT = {
                            has_country_flag = CES_vindictive_god_ending
                            has_country_flag = CES_faced_divine_judgement
                            has_idea = CES_solarist_partially_pleased_daybreaker
                        }
                    }
                    FROM = {
                        tag = EQS
                        has_completed_focus = SOL_god_empress
                    }
                }
                FROM = {
                    country_event = {
                        id = solarreworked.465
                        days = 7
                        random_days = 7
                    }
                }
            }
        }
    }
    on_state_control_changed = { #Root is new controller. From is old controller. FROM.FROM is the state
        effect = {
            log = "[GetDateText]: [ROOT.GetName]: on_state_control_changed solar_age"
            if = {
                limit = {
                    FROM.FROM = {
                        is_core_of = EQS
                    }
                    FROM = {
                        tag = EQS
                        has_power_balance = {
                            id = EQS_sanity_bop
                        }
                    }
                }
                FROM = {
                    add_power_balance_value = {
                        id = EQS_sanity_bop
                        value = -0.005
                    }
                }
            }
            if = {
                limit = {
                    FROM.FROM = {
                        is_core_of = EQS
                    }
                    ROOT = {
                        tag = EQS
                        has_power_balance = {
                            id = EQS_sanity_bop
                        }
                    }
                }
                ROOT = {
                    add_power_balance_value = {
                        id = EQS_sanity_bop
                        value = 0.005
                    }
                }
            }
            if = {
                limit = {
                    FROM.FROM = {
                        state = 3
                    }
                    FROM = {
                        tag = EQS
                        has_country_flag = SOL_holding_nmm
                    }
                    ROOT = {
                        tag = BAT
                    }
                }
                ROOT = {
                    country_event = solarreworked.511
                }
            }
        }
    }
    #ROOT = nation being puppeted, FROM = overlord
    on_puppet = {
        effect = {
            log = "[GetDateText]: [ROOT.GetName]: on_puppet solar_age"
            if = {
                limit = {
                    is_subject_of = event_target:solar_empire
                    NOT = {
                        original_tag = GRD
                        has_country_flag = is_solar_puppet
                    }
                    OR = {
                        original_tag = PLB
                        original_tag = GRF
                        original_tag = PNG
                        original_tag = STL
                        original_tag = BUF
                        original_tag = DRG
                        original_tag = GFF
                        original_tag = OLE
                        original_tag = BAL
                        original_tag = CES
                        original_tag = JUN
                        original_tag = SCS
                        original_tag = STG
                        original_tag = JAK
                        original_tag = CHN
                        original_tag = YAK
                        original_tag = AST
                        original_tag = HLR
                        original_tag = ZES
                        original_tag = HIP
                        original_tag = CTH
                        original_tag = CTL
                        original_tag = ABY
                        original_tag = ZOO
                        original_tag = MAZ
                        original_tag = STM
                        original_tag = GAR
                        original_tag = ROA
                        original_tag = ZAR
                        original_tag = SDL
                        original_tag = YMN
                        original_tag = MGY
                        original_tag = KAR
                        original_tag = REE
                        original_tag = MTA
                        original_tag = OSQ
                        original_tag = RIV
                        original_tag = KIR
                        original_tag = NVA
                        original_tag = KHM
                        original_tag = KXN
                        original_tag = DMT
                        original_tag = MTO
                    }
                }
                apply_SOL_cosmetic_tags_on_puppet = yes
            }
            #Will apply once EaW fixes releasing EQC
            #if = {
            #    limit = {
            #        is_subject_of = event_target:solar_empire
            #        original_tag = EQC
            #    }
            #    SOL_fix_albino_sunhorse = yes
            #}
        }
    }
    #ROOT = nation being released, FROM = overlord
    on_release_as_puppet = {
        effect = {
            log = "[GetDateText]: [ROOT.GetName]: on_release_as_puppet solar_age"
            if = {
                limit = {
                    is_subject_of = event_target:solar_empire
                    NOT = {
                        original_tag = GRD
                        has_country_flag = is_solar_puppet
                    }
                    OR = {
                        original_tag = PLB
                        original_tag = GRF
                        original_tag = PNG
                        original_tag = STL
                        original_tag = BUF
                        original_tag = DRG
                        original_tag = GFF
                        original_tag = OLE
                        original_tag = BAL
                        original_tag = CES
                        original_tag = JUN
                        original_tag = SCS
                        original_tag = STG
                        original_tag = JAK
                        original_tag = CHN
                        original_tag = YAK
                        original_tag = AST
                        original_tag = HLR
                        original_tag = ZES
                        original_tag = HIP
                        original_tag = CTH
                        original_tag = CTL
                        original_tag = ABY
                        original_tag = ZOO
                        original_tag = MAZ
                        original_tag = STM
                        original_tag = GAR
                        original_tag = ROA
                        original_tag = ZAR
                        original_tag = SDL
                        original_tag = YMN
                        original_tag = MGY
                        original_tag = KAR
                        original_tag = REE
                        original_tag = MTA
                        original_tag = OSQ
                        original_tag = RIV
                        original_tag = KIR
                        original_tag = NVA
                        original_tag = KHM
                        original_tag = KXN
                        original_tag = DMT
                        original_tag = MTO
                    }
                }
                apply_SOL_cosmetic_tags_on_puppet = yes
            }
            #Will apply once EaW fixes releasing EQC
            #if = {
            #    limit = {
            #        is_subject_of = event_target:solar_empire
            #        original_tag = EQC
            #    }
            #    SOL_fix_albino_sunhorse = yes
            #}
        }
    }
    #on_monthly = {
    #    effect = {
    #        log = "[GetDateText]: [ROOT.GetName]: on_monthly solar_age"
    #        if = {
    #            limit = {
    #                ROOT = {
    #                    is_ai = no
    #                }
    #                EQS = {
    #                    has_country_flag = EQS_player_started_as_EQS
    #                }
    #                NOT = {
    #                    any_other_country = { is_ai = no }
    #                }
    #            }
    #            #country_event = solarreworked.420 #You nasty, John Paradox, you
    #        }
    #    }
    #}
    #ROOT is the winner, FROM is the loser
    on_peaceconference_ended = {
        effect = {
            log = "[GetDateText]: [ROOT.GetName]: on_peaceconference_ended solar_age"
            if = {
                limit = {
                    ROOT = {
                        tag = EQS
                        is_EQS_SOL = yes
                    }
                    FROM = {
                        tag = NLR
                    }
                }
                ROOT = {
                    country_event = {
                        id = solarreworked.258
                        days = 1
                    }
                }
            }
            if = {
                limit = {
                    ROOT = {
                        tag = EQS
                        is_EQS_SOL = yes
                    }
                    FROM = {
                        tag = CES
                        has_character = CES_daring_do
                    }
                }
                ROOT = {
                    country_event = {
                        id = solarreworked.477
                        days = 14
                        random_days = 7
                    }
                }
            }
            if = {
                limit = {
                    ROOT = {
                        tag = EQS
                        is_EQS_SOL = yes
                    }
                    FROM = {
                        tag = STG
                    }
                }
                ROOT = {
                    country_event = {
                        id = solarreworked.472
                        days = 30
                        random_days = 15
                    }
                }
            }
            if = {
                limit = {
                    ROOT = {
                        tag = EQS
                        is_EQS_SOL = yes
                    }
                    FROM = {
                        tag = event_target:equestria
                        has_country_flag = SOL_hosting_M6
                    }
                }
                ROOT = {
                    country_event = {
                        id = solarreworked.532
                        days = 7
                        random_days = 3
                    }
                }
            }
        }
    }
    on_monthly_EQS = {
        effect = {
            log = "[GetDateText]: [ROOT.GetName] on_monthly_EQS solar_age"
            if = {
                limit = {
                    OR = {
                        has_completed_focus = SOL_Imperial_Investigative_Service
                        has_completed_focus = SOL_solaris_speculatores
                    }
                    OR = {
                        NOT = { has_dlc = "La Resistance" }
                        AND = {
                            has_dlc = "La Resistance"
                            has_intelligence_agency = yes
                        }
                    }
                    NOT = { has_global_flag = SOL_attempted_enemy_assassinations }
                }
                every_possible_country = {
                    limit = {
                        has_character = EQS_princess_luna
                        NOT = { tag = HIP }
                        NOT = { tag = RCT }
                        NOT = { tag = MGY }
                        NOT = { tag = NLR }
                        NOT = { tag = EQS }
                        NOT = { tag = event_target:equestria }
                        exists = yes
                    }
                    country_event = {
                        id = solarreworked.163
                        random_days = 14
                    }
                }
                set_global_flag = SOL_attempted_enemy_assassinations
            }
            if = {
                limit = {
                    has_completed_focus = SOL_Imperium_Solis
                    has_war_with = NLR
                    NOT = { has_country_flag = SOL_empress_fight }
                    NLR = {
                        exists = yes
                        surrender_progress > 0.3
                    }
                }
                country_event = solarreworked.259
            }
            if = {
                limit = {
                    has_completed_focus = SOL_solaris_inquisitionis
                    has_global_flag = SOL_twilight_converted
                    NOT = { has_country_flag = SOL_god_empress_flavor }
                }
                country_event = {
                    id = solarreworked.315
                    days = 60
                    random_days = 90
                }
                set_country_flag = SOL_god_empress_flavor
            }
            #Transferring impassable states to correct puppets
            if = {
                limit = {
                    is_EQS_SOL = yes
                    757 = {
                        OWNER = {
                            is_puppet_of = EQS
                            NOT = { tag = ZAR }
                        }
                        ZAR = { is_subject_of = EQS }
                    }
                }
                ZAR = {
                    transfer_state = 757
                    add_state_core = 757
                }
            }
            if = {
                limit = {
                    is_EQS_SOL = yes
                    768 = {
                        OWNER = {
                            is_puppet_of = EQS
                            NOT = { tag = ZAR }
                        }
                        ZAR = { is_subject_of = EQS }
                    }
                }
                ZAR = {
                    transfer_state = 768
                    add_state_core = 768
                }
            }
            if = {
                limit = {
                    is_EQS_SOL = yes
                    890 = {
                        OWNER = {
                            is_puppet_of = EQS
                            NOT = { tag = ZAR }
                        }
                        ZAR = { is_subject_of = EQS }
                    }
                }
                ZAR = {
                    transfer_state = 890
                    add_state_core = 890
                }
            }
            if = {
                limit = {
                    is_EQS_SOL = yes
                    893 = {
                        OWNER = {
                            is_puppet_of = EQS
                            NOT = { tag = ZAR }
                        }
                        ZAR = { is_subject_of = EQS }
                    }
                }
                ZAR = {
                    transfer_state = 893
                    add_state_core = 893
                }
            }
            if = {
                limit = {
                    is_EQS_SOL = yes
                    1041 = {
                        OWNER = {
                            is_puppet_of = EQS
                            NOT = { tag = ZAR }
                        }
                        ZAR = { is_subject_of = EQS }
                    }
                }
                ZAR = {
                    transfer_state = 1041
                    add_state_core = 1041
                }
            }
            if = {
                limit = {
                    is_EQS_SOL = yes
                    1044 = {
                        OWNER = {
                            is_puppet_of = EQS
                            NOT = { tag = ZAR }
                        }
                        ZAR = { is_subject_of = EQS }
                    }
                }
                ZAR = {
                    transfer_state = 1044
                    add_state_core = 1044
                }
            }
            if = {
                limit = {
                    is_EQS_SOL = yes
                    1046 = {
                        OWNER = {
                            is_puppet_of = EQS
                            NOT = { tag = GAR }
                        }
                        GAR = { is_subject_of = EQS }
                    }
                }
                GAR = {
                    transfer_state = 1046
                    add_state_core = 1046
                }
            }
        }
    }
    on_weekly_EQS = { #To clean up borders a bit
        effect = {
            log = "[GetDateText]: [ROOT.GetName]: on_weekly_EQS solar_age"
            if = {
                limit = {
                    has_war = yes
                }
                EQS_update_lost_soldier_corpses = yes
            }
            #if = {
            #    limit = {
            #        is_ai = no
            #        NOT = { has_country_flag = EQS_player_started_as_EQS }
            #        NOT = {
            #            any_other_country = { is_ai = no } #Basically the only way to check if there's a multiplayer game, since PDX decided not to have a is_multiplayer or some such trigger
            #        }
            #    }
            #    set_country_flag = EQS_player_started_as_EQS
            #}
            if = {
                limit = {
                    NOT = { has_country_flag = SOL_puppets_left }
                    has_war = no
                    is_EQS_SOL = yes
                }
                country_event = {
                    id = solarreworked.502
                    days = 21
                    random_days = 21
                }
                set_country_flag = SOL_puppets_left
            }
            if = {
                limit = {
                    date > 1021.12.31
                    EQS = {
                        has_completed_focus = SOL_rouse_godhood
                        CRY_flurry_heart = {
                            NOT = { is_corps_commander = yes }
                            is_advisor = yes
                        }
                        NOT = { has_country_flag = SOL_flurry_field_position }
                    }
                }
                set_country_flag = SOL_flurry_field_position
                country_event = {
                    id = solarreworked.501
                    days = 30
                    random_days = 120
                }
            }
            if = {
                limit = {
                    owns_state = 1208
                    MGY = { is_subject_of = ROOT }
                    is_EQS_SOL = yes
                }
                MGY = {
                    transfer_state = 1208
                    add_state_core = 1208
                }
            }
            if = {
                limit = {
                    PLB = { is_subject_of = EQS }
                    EQS = { is_EQS_SOL = yes }
                    PNG = {
                        is_subject_of = EQS
                        is_ai = yes
                        NOT = { has_country_flag = SOL_PNG_accepted }
                    }
                }
                every_state = {
                    limit = { is_core_of = PNG }
                    add_core_of = PLB
                }
                PLB = {
                    annex_country = {
                        target = PNG
                    }
                    set_cosmetic_tag = ARC_SOL
                }
            }
            #if = {
            #    limit = {
            #        NTR = { is_subject_of = EQS }
            #        EQS = { is_EQS_SOL = yes }
            #        AND = {
            #            OR = {
            #                GRD = { is_subject_of = EQS }
            #                SRS = { is_subject_of = EQS }
            #            }
            #            522 = {
            #                OR = {
            #                    is_owned_and_controlled_by = SRS
            #                    is_owned_and_controlled_by = GRD
            #                }
            #            }
            #            561 = {
            #                OR = {
            #                    is_owned_and_controlled_by = SRS
            #                    is_owned_and_controlled_by = GRD
            #                }
            #            }
            #            542 = {
            #                OR = {
            #                    is_owned_and_controlled_by = SRS
            #                    is_owned_and_controlled_by = GRD
            #                }
            #            }
            #            585 = {
            #                OR = {
            #                    is_owned_and_controlled_by = SRS
            #                    is_owned_and_controlled_by = GRD
            #                }
            #            }
            #            601 = {
            #                OR = {
            #                    is_owned_and_controlled_by = SRS
            #                    is_owned_and_controlled_by = GRD
            #                }
            #            }
            #        }
            #    }
            #    every_state = {
            #        limit = { is_core_of = SRS }
            #        add_core_of = NTR
            #        NTR = { transfer_state = PREV.id }
            #    }
            #}
            if = {
                limit = {
                    country_exists = FBK
                    FBK = { is_subject_of = EQS }
                    OR = {
                        AND = {
                            country_exists = WAT
                            WAT = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                        AND = {
                            country_exists = FIR
                            FIR = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                    }
                }
                if = {
                    limit = { country_exists = WAT }
                    FBK = {
                        annex_country = {
                            target = WAT
                        }
                    }
                    every_state = {
                        limit = { is_core_of = WAT }
                        add_core_of = FBK
                    }
                }
                if = {
                    limit = { country_exists = FIR }
                    FBK = {
                        annex_country = {
                            target = FIR
                        }
                    }
                    every_state = {
                        limit = { is_core_of = FIR }
                        add_core_of = FBK
                    }
                }
            }
            if = {
                limit = {
                    country_exists = MTA
                    MTA = { is_subject_of = EQS }
                    OR = {
                        AND = {
                            country_exists = OSQ
                            OSQ = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                        AND = {
                            country_exists = HMR
                            HMR = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                        AND = {
                            country_exists = REE
                            REE = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                    }
                }
                if = {
                    limit = { country_exists = REE }
                    MTA = {
                        annex_country = {
                            target = REE
                        }
                    }
                    every_state = {
                        limit = { is_core_of = REE }
                        add_core_of = MTA
                    }
                }
                if = {
                    limit = { country_exists = HMR }
                    MTA = {
                        annex_country = {
                            target = HMR
                        }
                    }
                    every_state = {
                        limit = { is_core_of = HMR }
                        add_core_of = MTA
                    }
                }
                if = {
                    limit = { country_exists = OSQ }
                    MTA = {
                        annex_country = {
                            target = OSQ
                        }
                    }
                    every_state = {
                        limit = { is_core_of = OSQ }
                        add_core_of = MTA
                    }
                }
            }
            if = {
                limit = {
                    country_exists = KXN
                    KXN = { is_subject_of = EQS }
                    OR = {
                        AND = {
                            country_exists = KHM
                            KHM = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                        AND = {
                            country_exists = NVA
                            NVA = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                    }
                }
                if = {
                    limit = { country_exists = NVA }
                    KXN = {
                        annex_country = {
                            target = NVA
                        }
                    }
                    every_state = {
                        limit = { is_core_of = NVA }
                        add_core_of = KXN
                    }
                }
                if = {
                    limit = { country_exists = KHM }
                    KXN = {
                        annex_country = {
                            target = KHM
                        }
                    }
                    every_state = {
                        limit = { is_core_of = KHM }
                        add_core_of = KXN
                    }
                }
            }
            if = {
                limit = {
                    country_exists = MTO
                    MTO = { is_subject_of = EQS }
                    OR = {
                        AND = {
                            country_exists = AES
                            AES = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                        AND = {
                            country_exists = KAR
                            KAR = { is_subject_of = EQS }
                            EQS = { is_EQS_SOL = yes }
                        }
                    }
                }
                if = {
                    limit = {
                        country_exists = KAR
                        is_subject_of = EQS
                    }
                    MTO = {
                        annex_country = {
                            target = KAR
                        }
                    }
                    every_state = {
                        limit = { is_core_of = KAR }
                        add_core_of = MTO
                    }
                }
                if = {
                    limit = {
                        country_exists = AES
                        is_subject_of = EQS
                    }
                    MTO = {
                        annex_country = {
                            target = AES
                        }
                    }
                    every_state = {
                        limit = { is_core_of = AES }
                        add_core_of = AES
                    }
                }
                if = {
                    limit = {
                        country_exists = IDT
                        is_subject_of = EQS
                    }
                    MTO = {
                        annex_country = {
                            target = IDT
                        }
                    }
                    every_state = {
                        limit = { is_core_of = IDT }
                        add_core_of = MTO
                    }
                }
            }
            if = {
                limit = {
                    RIV = {
                        exists = yes
                        is_puppet_of = EQS
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = {
                        NOT = { tag = BAR }
                        BAR = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = BAR }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = BAR
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = FRE }
                        FRE = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = FRE }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = FRE
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = WIT }
                        WIT = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = WIT }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = WIT
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = LCT }
                        LCT = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = LCT }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = LCT
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = DEP }
                        DEP = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = DEP }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = DEP
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = NIM }
                        NIM = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = NIM }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = NIM
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = BAK }
                        BAK = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = BAK }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = BAK
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = DMT }
                        DMT = {
                            exists = yes
                            is_puppet_of = OVERLORD
                            OVERLORD = { NOT = { has_country_flag = SOL_doghouse_set_up } }
                        }
                    }
                    every_state = {
                        limit = { is_core_of = DMT }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = DMT
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { tag = RCT }
                        RCT = {
                            exists = yes
                            is_puppet_of = OVERLORD
                        }
                    }
                    every_state = {
                        limit = { is_core_of = RCT }
                        add_core_of = RIV
                    }
                    RIV = {
                        annex_country = {
                            target = RCT
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = HIP
                    HIP = { is_subject_of = EQS }
                    OR = {
                        WIN = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        MER = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        WAR = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        ZUM = {
                            OR = {
                                AND = {
                                    exists = yes
                                    is_subject_of = EQS
                                }
                                all_cores_owned_by_ROOT = yes
                            }
                        }
                        TBK = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = WIN }
                    every_state = {
                        limit = { is_core_of = WIN }
                        add_core_of = HIP
                    }
                    HIP = {
                        annex_country = {
                            target = WIN
                        }
                    }
                }
                if = {
                    limit = {
                        ZUM = {
                            OR = {
                                all_cores_owned_by_ROOT = yes
                                exists = yes
                            }
                        }
                    }
                    every_state = {
                        limit = { is_core_of = ZUM }
                        add_core_of = HIP
                    }
                    if = {
                        limit = { country_exists = ZUM }
                        HIP = {
                            annex_country = {
                                target = ZUM
                            }
                        }
                    }
                }
                if = {
                    limit = { country_exists = WAR }
                    every_state = {
                        limit = { is_core_of = WAR }
                        add_core_of = HIP
                    }
                    HIP = {
                        annex_country = {
                            target = WAR
                        }
                    }
                }
                if = {
                    limit = { country_exists = TBK }
                    every_state = {
                        limit = { is_core_of = TBK }
                        add_core_of = HIP
                    }
                    HIP = {
                        annex_country = {
                            target = TBK
                        }
                    }
                }
                if = {
                    limit = { country_exists = MER }
                    every_state = {
                        limit = { is_core_of = MER }
                        add_core_of = HIP
                    }
                    HIP = {
                        annex_country = {
                            target = MER
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = ABY
                    ABY = { is_subject_of = EQS }
                    OR = {
                        ANS = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        ASS = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = ANS }
                    every_state = {
                        limit = { is_core_of = ANS }
                        add_core_of = ABY
                    }
                    ABY = {
                        annex_country = {
                            target = ANS
                        }
                    }
                }
                if = {
                    limit = { country_exists = ASS }
                    every_state = {
                        limit = { is_core_of = ASS }
                        add_core_of = ABY
                    }
                    ABY = {
                        annex_country = {
                            target = ASS
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = ZES
                    ZES = { is_subject_of = EQS }
                    OLV = {
                        exists = yes
                        is_subject_of = EQS
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = OLV }
                    every_state = {
                        limit = { is_core_of = OLV }
                        add_core_of = ZES
                    }
                    ZES = {
                        annex_country = {
                            target = OLV
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = HLR
                    HLR = { is_subject_of = EQS }
                    OR = {
                        DED = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        NCH = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = DED }
                    every_state = {
                        limit = { is_core_of = DED }
                        add_core_of = HLR
                    }
                    HLR = {
                        annex_country = {
                            target = DED
                        }
                    }
                }
                if = {
                    limit = { country_exists = NCH }
                    every_state = {
                        limit = { is_core_of = NCH }
                        add_core_of = HLR
                    }
                    HLR = {
                        annex_country = {
                            target = NCH
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = MAZ
                    MAZ = { is_subject_of = EQS }
                    OR = {
                        MSS = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        SON = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        ZWA = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        MSH = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        ZUG = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        ZEL = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        HAY = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = MSS }
                    every_state = {
                        limit = { is_core_of = MSS }
                        add_core_of = MAZ
                    }
                    MAZ = {
                        annex_country = {
                            target = MSS
                        }
                    }
                }
                if = {
                    limit = { country_exists = SON }
                    every_state = {
                        limit = { is_core_of = SON }
                        add_core_of = MAZ
                    }
                    MAZ = {
                        annex_country = {
                            target = SON
                        }
                    }
                }
                if = {
                    limit = { country_exists = ZWA }
                    every_state = {
                        limit = { is_core_of = ZWA }
                        add_core_of = MAZ
                    }
                    MAZ = {
                        annex_country = {
                            target = ZWA
                        }
                    }
                }
                if = {
                    limit = { country_exists = ZUG }
                    every_state = {
                        limit = { is_core_of = ZUG }
                        add_core_of = MAZ
                    }
                    MAZ = {
                        annex_country = {
                            target = ZUG
                        }
                    }
                }
                if = {
                    limit = { country_exists = ZEL }
                    every_state = {
                        limit = { is_core_of = ZEL }
                        add_core_of = MAZ
                    }
                    MAZ = {
                        annex_country = {
                            target = ZEL
                        }
                    }
                }
                if = {
                    limit = { country_exists = MSH }
                    every_state = {
                        limit = { is_core_of = MSH }
                        add_core_of = MAZ
                    }
                    MAZ = {
                        annex_country = {
                            target = MSH
                        }
                    }
                }
                if = {
                    limit = { country_exists = HAY }
                    every_state = {
                        limit = { is_core_of = HAY }
                        add_core_of = MAZ
                    }
                    MAZ = {
                        annex_country = {
                            target = HAY
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = ZAR
                    ZAR = { is_subject_of = EQS }
                    OR = {
                        ZAI = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        ALO = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        TIM = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        CZR = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = ZAI }
                    every_state = {
                        limit = { is_core_of = ZAI }
                        add_core_of = ZAR
                    }
                    ZAR = {
                        annex_country = {
                            target = ZAI
                        }
                    }
                }
                if = {
                    limit = { country_exists = ALO }
                    every_state = {
                        limit = { is_core_of = ALO }
                        add_core_of = ZAR
                    }
                    ZAR = {
                        annex_country = {
                            target = ALO
                        }
                    }
                }
                if = {
                    limit = { country_exists = CZR }
                    every_state = {
                        limit = { is_core_of = CZR }
                        add_core_of = ZAR
                    }
                    ZAR = {
                        annex_country = {
                            target = CZR
                        }
                    }
                }
                if = {
                    limit = { country_exists = TIM }
                    every_state = {
                        limit = { is_core_of = TIM }
                        add_core_of = ZAR
                    }
                    ZAR = {
                        annex_country = {
                            target = TIM
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = CTL
                    CTL = { is_subject_of = EQS }
                    OR = {
                        HRV = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        SAM = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        HIN = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        LMB = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        SPL = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        BRS = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        GAZ = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = HRV }
                    every_state = {
                        limit = { is_core_of = HRV }
                        add_core_of = CTL
                    }
                    CTL = {
                        annex_country = {
                            target = HRV
                        }
                    }
                }
                if = {
                    limit = { country_exists = SAM }
                    every_state = {
                        limit = { is_core_of = SAM }
                        add_core_of = CTL
                    }
                    CTL = {
                        annex_country = {
                            target = SAM
                        }
                    }
                }
                if = {
                    limit = { country_exists = HIN }
                    every_state = {
                        limit = { is_core_of = HIN }
                        add_core_of = CTL
                    }
                    CTL = {
                        annex_country = {
                            target = HIN
                        }
                    }
                }
                if = {
                    limit = { country_exists = SPL }
                    every_state = {
                        limit = { is_core_of = SPL }
                        add_core_of = CTL
                    }
                    CTL = {
                        annex_country = {
                            target = SPL
                        }
                    }
                }
                if = {
                    limit = { country_exists = BRS }
                    every_state = {
                        limit = { is_core_of = BRS }
                        add_core_of = CTL
                    }
                    CTL = {
                        annex_country = {
                            target = BRS
                        }
                    }
                }
                if = {
                    limit = { country_exists = LMB }
                    every_state = {
                        limit = { is_core_of = LMB }
                        add_core_of = CTL
                    }
                    CTL = {
                        annex_country = {
                            target = LMB
                        }
                    }
                }
                if = {
                    limit = { country_exists = GAZ }
                    every_state = {
                        limit = { is_core_of = GAZ }
                        add_core_of = CTL
                    }
                    CTL = {
                        annex_country = {
                            target = GAZ
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = ROA
                    ROA = { is_subject_of = EQS }
                    OR = {
                        BLT = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        CME = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        GIF = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        GFS = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        ZLU = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        TSV = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = BLT }
                    every_state = {
                        limit = { is_core_of = BLT }
                        add_core_of = ROA
                    }
                    ROA = {
                        annex_country = {
                            target = ROA
                        }
                    }
                }
                if = {
                    limit = { country_exists = CME }
                    every_state = {
                        limit = { is_core_of = CME }
                        add_core_of = ROA
                    }
                    ROA = {
                        annex_country = {
                            target = CME
                        }
                    }
                }
                if = {
                    limit = { country_exists = GIF }
                    every_state = {
                        limit = { is_core_of = GIF }
                        add_core_of = ROA
                    }
                    ROA = {
                        annex_country = {
                            target = GIF
                        }
                    }
                }
                if = {
                    limit = { country_exists = GFS }
                    every_state = {
                        limit = { is_core_of = GFS }
                        add_core_of = ROA
                    }
                    ROA = {
                        annex_country = {
                            target = GFS
                        }
                    }
                }
                if = {
                    limit = { country_exists = ZLU }
                    every_state = {
                        limit = { is_core_of = ZLU }
                        add_core_of = ROA
                    }
                    ROA = {
                        annex_country = {
                            target = ZLU
                        }
                    }
                }
                if = {
                    limit = { country_exists = TSV }
                    every_state = {
                        limit = { is_core_of = TSV }
                        add_core_of = ROA
                    }
                    ROA = {
                        annex_country = {
                            target = TSV
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = ZOO
                    ZOO = { is_subject_of = EQS }
                    OR = {
                        TAI = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        MEL = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        MQA = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        IST = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        IDO = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        DEL = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        YAN = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = TAI }
                    every_state = {
                        limit = { is_core_of = TAI }
                        add_core_of = ZOO
                    }
                    ZOO = {
                        annex_country = {
                            target = TAI
                        }
                    }
                }
                if = {
                    limit = { country_exists = MEL }
                    every_state = {
                        limit = { is_core_of = MEL }
                        add_core_of = ZOO
                    }
                    TAI = {
                        annex_country = {
                            target = MEL
                        }
                    }
                }
                if = {
                    limit = { country_exists = MQA }
                    every_state = {
                        limit = { is_core_of = MQA }
                        add_core_of = ZOO
                    }
                    ZOO = {
                        annex_country = {
                            target = MQA
                        }
                    }
                }
                if = {
                    limit = { country_exists = IDO }
                    every_state = {
                        limit = { is_core_of = IDO }
                        add_core_of = ZOO
                    }
                    ZOO = {
                        annex_country = {
                            target = IDO
                        }
                    }
                }
                if = {
                    limit = { country_exists = IST }
                    every_state = {
                        limit = { is_core_of = IST }
                        add_core_of = ZOO
                    }
                    ZOO = {
                        annex_country = {
                            target = IST
                        }
                    }
                }
                if = {
                    limit = { country_exists = DEL }
                    every_state = {
                        limit = { is_core_of = DEL }
                        add_core_of = ZOO
                    }
                    ZOO = {
                        annex_country = {
                            target = DEL
                        }
                    }
                }
                if = {
                    limit = { country_exists = YAN }
                    every_state = {
                        limit = { is_core_of = YAN }
                        add_core_of = ZOO
                    }
                    ZOO = {
                        annex_country = {
                            target = YAN
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = CTH
                    CTH = { is_subject_of = EQS }
                    OR = {
                        CDR = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        CVA = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        CGI = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        MCW = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = CDR }
                    every_state = {
                        limit = { is_core_of = CDR }
                        add_core_of = CTH
                    }
                    CTH = {
                        annex_country = {
                            target = CDR
                        }
                    }
                }
                if = {
                    limit = { country_exists = CVA }
                    every_state = {
                        limit = { is_core_of = CVA }
                        add_core_of = CTH
                    }
                    CTH = {
                        annex_country = {
                            target = CVA
                        }
                    }
                }
                if = {
                    limit = { country_exists = CGI }
                    every_state = {
                        limit = { is_core_of = CGI }
                        add_core_of = CTH
                    }
                    CTH = {
                        annex_country = {
                            target = CGI
                        }
                    }
                }
                if = {
                    limit = { country_exists = MCW }
                    every_state = {
                        limit = { is_core_of = MCW }
                        add_core_of = CTH
                    }
                    CTH = {
                        annex_country = {
                            target = MCW
                        }
                    }
                }
            }
            if = {
                limit = {
                    country_exists = GAR
                    GAR = { is_subject_of = EQS }
                    OR = {
                        CNT = {
                            exists = yes
                            is_subject_of = EQS
                        }
                        HYE = {
                            exists = yes
                            is_subject_of = EQS
                        }
                    }
                    is_EQS_SOL = yes
                }
                if = {
                    limit = { country_exists = CNT }
                    every_state = {
                        limit = { is_core_of = CNT }
                        add_core_of = GAR
                    }
                    GAR = {
                        annex_country = {
                            target = CNT
                        }
                    }
                }
                if = {
                    limit = { country_exists = HYE }
                    every_state = {
                        limit = { is_core_of = HYE }
                        add_core_of = GAR
                    }
                    GAR = {
                        annex_country = {
                            target = HYE
                        }
                    }
                }
            }
        }
    }
    on_startup = { #Don't want to touch MGY files. But seriously, EaW, why no Somnambula advisor trait despite having her recruited?
        effect = {
            every_possible_country = {
                limit = { has_character = MGY_somnambula }
                MGY_somnambula = {
                    add_advisor_role = {
                        advisor = {
                            slot = political_advisor
                            idea_token = somnambula
                            traits = { pillar_of_hope_solar }
                        }
                    }
                }
            }
        }
    }
}
